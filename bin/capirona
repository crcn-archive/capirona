#!/usr/bin/env node

var cli = require('optimist').
usage("Usage: $0 [targets] -i=[target] --arg=[value]").
alias('i','input').
default('i',"./make.json"),
argv = cli.argv,
capirona = require('../');

if(argv.h || argv.help) {
	cli.showHelp();
	process.exit();
}

var makeTarget = (argv.i).
replace('~', process.env.HOME).
replace('./', process.cwd() + "/");


capirona.make().load(makeTarget).run(argv._, argv, function(err) {
	if(err) return console.error(err);
	console.log('done without errors')
});